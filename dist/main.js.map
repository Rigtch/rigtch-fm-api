{"version":3,"sources":["../src/main.ts"],"sourcesContent":["import { NestFactory } from '@nestjs/core'\nimport { ConfigService } from '@nestjs/config'\nimport cookieParser from 'cookie-parser'\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger'\n\nimport { Environment } from './config'\n\nimport { AppModule } from '@modules/app'\nimport { AuthenticationType } from '@modules/auth/enums'\nimport { BEARER } from '@modules/auth/constants'\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule)\n  const configService = app.get(ConfigService)\n\n  const documentConfig = new DocumentBuilder()\n    .setTitle('Rigtch Music API')\n    .addBearerAuth(\n      {\n        type: 'http',\n        scheme: BEARER,\n        bearerFormat: 'JWT',\n      },\n      AuthenticationType.ACCESS_TOKEN\n    )\n    .addBearerAuth(\n      {\n        type: 'http',\n        scheme: BEARER,\n        bearerFormat: 'JWT',\n      },\n      AuthenticationType.REFRESH_TOKEN\n    )\n    .build()\n\n  const document = SwaggerModule.createDocument(app, documentConfig)\n\n  SwaggerModule.setup('api', app, document)\n\n  app.enableCors({\n    origin: configService.get(Environment.CLIENT_CALLBACK_URL),\n    // origin: '*',\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS',\n    credentials: true,\n  })\n  app.use(cookieParser())\n\n  await app.startAllMicroservices()\n  await app.listen(+configService.get(Environment.PORT) || 4000)\n}\nbootstrap()\n"],"names":["bootstrap","app","NestFactory","create","AppModule","configService","get","ConfigService","documentConfig","DocumentBuilder","setTitle","addBearerAuth","type","scheme","BEARER","bearerFormat","AuthenticationType","ACCESS_TOKEN","REFRESH_TOKEN","build","document","SwaggerModule","createDocument","setup","enableCors","origin","Environment","CLIENT_CALLBACK_URL","methods","credentials","use","cookieParser","startAllMicroservices","listen","PORT"],"mappings":";;;;sBAA4B;wBACE;qEACL;yBACsB;yBAEnB;qBAEF;uBACS;2BACZ;;;;;;AAEvB,eAAeA;IACb,MAAMC,MAAM,MAAMC,iBAAW,CAACC,MAAM,CAACC,cAAS;IAC9C,MAAMC,gBAAgBJ,IAAIK,GAAG,CAACC,qBAAa;IAE3C,MAAMC,iBAAiB,IAAIC,wBAAe,GACvCC,QAAQ,CAAC,oBACTC,aAAa,CACZ;QACEC,MAAM;QACNC,QAAQC,iBAAM;QACdC,cAAc;IAChB,GACAC,yBAAkB,CAACC,YAAY,EAEhCN,aAAa,CACZ;QACEC,MAAM;QACNC,QAAQC,iBAAM;QACdC,cAAc;IAChB,GACAC,yBAAkB,CAACE,aAAa,EAEjCC,KAAK;IAER,MAAMC,WAAWC,sBAAa,CAACC,cAAc,CAACrB,KAAKO;IAEnDa,sBAAa,CAACE,KAAK,CAAC,OAAOtB,KAAKmB;IAEhCnB,IAAIuB,UAAU,CAAC;QACbC,QAAQpB,cAAcC,GAAG,CAACoB,oBAAW,CAACC,mBAAmB;QACzD,eAAe;QACfC,SAAS;QACTC,aAAa;IACf;IACA5B,IAAI6B,GAAG,CAACC,IAAAA,qBAAY;IAEpB,MAAM9B,IAAI+B,qBAAqB;IAC/B,MAAM/B,IAAIgC,MAAM,CAAC,CAAC5B,cAAcC,GAAG,CAACoB,oBAAW,CAACQ,IAAI,KAAK;AAC3D;AACAlC"}