{"version":3,"sources":["../../src/utils/catch-spotify-error.ts"],"sourcesContent":["import {\n  ForbiddenException,\n  InternalServerErrorException,\n  UnauthorizedException,\n} from '@nestjs/common'\n\nexport const catchSpotifyError = error => {\n  const {\n    response: { data, status },\n  } = error\n\n  if (data?.error === 'invalid_grant')\n    throw new UnauthorizedException('Invalid token')\n  if (status === 401) throw new UnauthorizedException(data?.error?.message)\n  if (\n    status === 403 &&\n    data === 'User not registered in the Developer Dashboard'\n  )\n    throw new ForbiddenException(\n      'User not registered in the Developer Dashboard'\n    )\n\n  throw new InternalServerErrorException(\n    'Something went wrong with fetching data from spotify API',\n    data?.error\n  )\n}\n"],"names":["catchSpotifyError","error","response","data","status","UnauthorizedException","message","ForbiddenException","InternalServerErrorException"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBAFN;AAEA,MAAMA,oBAAoBC,CAAAA;IAC/B,MAAM,EACJC,UAAU,EAAEC,IAAI,EAAEC,MAAM,EAAE,EAC3B,GAAGH;IAEJ,IAAIE,MAAMF,UAAU,iBAClB,MAAM,IAAII,6BAAqB,CAAC;IAClC,IAAID,WAAW,KAAK,MAAM,IAAIC,6BAAqB,CAACF,MAAMF,OAAOK;IACjE,IACEF,WAAW,OACXD,SAAS,kDAET,MAAM,IAAII,0BAAkB,CAC1B;IAGJ,MAAM,IAAIC,oCAA4B,CACpC,4DACAL,MAAMF;AAEV"}